@startuml
skinparam handwritten false
left to right direction


actor Estudiante
actor Profesor
actor Bibliotecario
actor Sistema as Notificador


package "Búsqueda y consulta" {
usecase "Buscar en catálogo" as UC_Buscar
usecase "Ver historial de préstamos" as UC_Historial
usecase "Consultar estado de libro" as UC_EstadoLibro
}


package "Gestión de Reservas" {
usecase "Hacer reserva" as UC_HacerReserva
usecase "Cancelar reserva" as UC_CancelarReserva
usecase "Notificar disponibilidad" as UC_NotifDisp
}


package "Penalizaciones" {
usecase "Calcular multa" as UC_CalcularMulta
usecase "Pagar multa online" as UC_PagarMulta
usecase "Aplicar penalización" as UC_AplicarPenal
}


package "Préstamos" {
usecase "Solicitar préstamo" as UC_Solicitar
usecase "Renovar préstamo" as UC_Renovar
usecase "Devolver libro" as UC_Devolver
}


package "Bibliotecario - Operaciones" {
usecase "Procesar devolución" as UC_ProcesarDevol
usecase "Registrar préstamo manual" as UC_RegistrarManual
}


package "Reportes" {
usecase "Generar reporte de préstamos" as UC_RepPrest
usecase "Generar reporte de multas" as UC_RepMultas
}


' Relaciones usuario - casos de uso
Estudiante --> UC_Buscar
Estudiante --> UC_Solicitar
Estudiante --> UC_Renovar
Estudiante --> UC_Devolver
Estudiante --> UC_Historial
Estudiante --> UC_PagarMulta
Estudiante --> UC_HacerReserva
Estudiante --> UC_CancelarReserva


Profesor --> UC_Buscar
Profesor --> UC_Solicitar
Profesor --> UC_Renovar
Profesor --> UC_Devolver
Profesor --> UC_Historial
Profesor --> UC_PagarMulta
' Profesor puede tener préstamos de larga duración (nota)
note right of Profesor
Préstamos: hasta 5 libros, 30 días,
renovaciones hasta 2.
end note


Bibliotecario --> UC_ProcesarDevol
Bibliotecario --> UC_RegistrarManual
Bibliotecario --> UC_AplicarPenal
Bibliotecario --> UC_RepPrest
Bibliotecario --> UC_RepMultas
Bibliotecario --> UC_CalcularMulta
Bibliotecario --> UC_HacerReserva


' Sistema (notificador)
Notificador --> UC_NotifDisp
@enduml