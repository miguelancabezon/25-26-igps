@startjson
' Diagrama JSON: Sistema de Objetos - Juego de Ritmo "Cosmic Beat"
' Autor: Felix Manrique
' Fecha: 2025-11-05

<style>
jsonDiagram {
  node {
    BackgroundColor lightcyan
  }
  arrow {
    LineColor darkblue
  }
  .metadata {
    BackgroundColor lightgray
  }
  .playerProfile {
    BackgroundColor lightblue
  }
  .song {
    BackgroundColor lightgreen
  }
  .gameSession {
    BackgroundColor lightyellow
  }
  .avatar {
    BackgroundColor lightpink
  }
  .actions {
    BackgroundColor orange
  }
}
</style>

{
  "metadata": {
    "systemName": "CosmicBeatGameEngine",
    "version": "1.2.3",
    "author": "Felix Manrique",
    "environment": "production",
    "language": "es-ES",
    "lastUpdated": "2025-11-05T14:30:00Z",
    "buildNumber": 45,
    "debug": false
  },
  
  "playerProfile": {
    "#color": "playerProfile",
    "id": "player-12345",
    "username": "CosmicRhythm42",
    "email": "cosmic@example.com",
    "level": 87,
    "experiencePoints": 245780,
    "totalPlayTime": 15600,
    "accountCreated": "2025-09-15T08:30:00Z",
    "lastLogin": "2025-11-05T13:45:22Z",
    "isVip": true,
    "isPremium": false,
    "statistics": {
      "totalSongsPlayed": 340,
      "perfectHits": 12450,
      "averageAccuracy": 94.7,
      "longestStreak": 256,
      "favoriteGenre": "Cyberpunk Electronic"
    },
    "highScores": [
      {
        "songId": "song-cosmic-001",
        "difficulty": "Expert",
        "score": 999850,
        "accuracy": 99.2,
        "maxCombo": 867,
        "dateAchieved": "2025-11-01T20:15:30Z"
      },
      {
        "songId": "song-neon-002", 
        "difficulty": "Hard",
        "score": 987320,
        "accuracy": 96.8,
        "maxCombo": 542,
        "dateAchieved": "2025-10-28T19:42:11Z"
      }
    ],
    "equippedAvatar": "avatar-cyber-ninja",
    "unlockedAvatars": ["avatar-space-pilot", "avatar-cyber-ninja", "avatar-neon-dancer"]
  },

  "song": {
    "#color": "song",
    "id": "song-cosmic-001",
    "title": "Cosmic Overdrive",
    "artist": "NeonSynth Collective",
    "album": "Digital Dreams",
    "genre": "Synthwave",
    "bpm": 145,
    "durationSeconds": 187,
    "releaseDate": "2025-08-20",
    "isUnlocked": true,
    "isPremium": false,
    "audioFileUrl": "/audio/cosmic-overdrive.ogg",
    "coverImageUrl": "/images/cosmic-overdrive-cover.jpg",
    "difficulties": [
      {
        "level": "Easy",
        "noteCount": 284,
        "maxScore": 500000,
        "unlocked": true
      },
      {
        "level": "Medium", 
        "noteCount": 567,
        "maxScore": 750000,
        "unlocked": true
      },
      {
        "level": "Hard",
        "noteCount": 923,
        "maxScore": 1000000,
        "unlocked": true
      },
      {
        "level": "Expert",
        "noteCount": 1456,
        "maxScore": 1250000,
        "unlocked": false
      }
    ],
    "beatmap": {
      "version": "1.0",
      "creator": "BeatmapMaster_99",
      "approvalStatus": "ranked",
      "playCount": 15420,
      "favoriteCount": 892
    }
  },

  "gameSession": {
    "#color": "gameSession", 
    "sessionId": "session-789abc",
    "playerId": "player-12345",
    "songId": "song-cosmic-001",
    "difficulty": "Hard",
    "startTime": "2025-11-05T14:25:10Z",
    "endTime": "2025-11-05T14:28:17Z",
    "isCompleted": true,
    "isPaused": false,
    "finalScore": 987320,
    "accuracy": 96.8,
    "maxCombo": 542,
    "missedNotes": 29,
    "perfectHits": 894,
    "hitTimings": [
      {"noteIndex": 1, "timing": 1452, "accuracy": "perfect"},
      {"noteIndex": 2, "timing": 1623, "accuracy": "good"},
      {"noteIndex": 3, "timing": 1798, "accuracy": "perfect"}
    ],
    "powerUpsUsed": [
      {"type": "scoreMultiplier", "activatedAt": 45.2},
      {"type": "autoHit", "activatedAt": 89.7}
    ],
    "experienceGained": 1250,
    "coinsEarned": 850
  },

  "avatar": {
    "#color": "avatar",
    "id": "avatar-cyber-ninja",
    "name": "Cyber Ninja",
    "description": "Un guerrero cibernético con habilidades de ritmo supremas",
    "rarity": "Epic", 
    "category": "Cyberpunk",
    "unlockRequirement": "Alcanzar nivel 50",
    "isUnlocked": true,
    "isPremium": false,
    "price": 5000,
    "currency": "coins",
    "purchaseDate": "2025-10-15T16:22:33Z",
    "visualAssets": {
      "modelFile": "/models/cyber-ninja.fbx",
      "textureFiles": [
        "/textures/cyber-ninja-diffuse.png",
        "/textures/cyber-ninja-normal.png", 
        "/textures/cyber-ninja-glow.png"
      ],
      "animationFiles": [
        "/animations/cyber-ninja-idle.anim",
        "/animations/cyber-ninja-hit.anim",
        "/animations/cyber-ninja-perfect.anim"
      ]
    },
    "specialEffects": [
      {
        "name": "Neon Trail",
        "type": "particle",
        "color": "#00FFFF",
        "enabled": true
      },
      {
        "name": "Cyber Aura",
        "type": "glow",
        "intensity": 0.8,
        "enabled": true
      }
    ],
    "stats": {
      "popularityRank": 3,
      "timesSelected": 2340,
      "averageScore": 892450
    }
  },

  "actions": {
    "#color": "actions",
    "startGameSession": {
      "description": "Inicia una nueva sesión de juego",
      "affectedClasses": ["gameSession", "playerProfile"],
      "requiredParams": ["playerId", "songId", "difficulty"],
      "optionalParams": ["selectedAvatar", "powerUps"],
      "returnType": "gameSession",
      "estimatedDuration": "3-5 minutes"
    },
    "updatePlayerScore": {
      "description": "Actualiza la puntuación y estadísticas del jugador",
      "affectedClasses": ["playerProfile", "gameSession"],
      "requiredParams": ["sessionId", "finalScore", "accuracy", "maxCombo"],
      "optionalParams": ["newPersonalRecord"],
      "returnType": "boolean",
      "estimatedDuration": "< 1 second"
    },
    "unlockAvatar": {
      "description": "Desbloquea un nuevo avatar para el jugador",
      "affectedClasses": ["playerProfile", "avatar"],
      "requiredParams": ["playerId", "avatarId"],
      "optionalParams": ["purchaseMethod", "discountApplied"],
      "returnType": "avatar",
      "estimatedDuration": "< 1 second"
    },
    "processBeatmapHit": {
      "description": "Procesa un hit del jugador en el beatmap",
      "affectedClasses": ["gameSession"],
      "requiredParams": ["sessionId", "noteIndex", "hitTiming"],
      "optionalParams": ["inputDevice"],
      "returnType": "hitResult",
      "estimatedDuration": "< 0.1 seconds"
    },
    "generateLeaderboard": {
      "description": "Genera el ranking de puntuaciones para una canción",
      "affectedClasses": ["song", "playerProfile"],
      "requiredParams": ["songId", "difficulty"],
      "optionalParams": ["timeRange", "region", "friendsOnly"],
      "returnType": "leaderboardData",
      "estimatedDuration": "1-3 seconds"
    },
    "saveGameProgress": {
      "description": "Guarda el progreso del juego en la base de datos",
      "affectedClasses": ["playerProfile", "gameSession"],
      "requiredParams": ["playerId", "sessionData"],
      "optionalParams": ["cloudSync"],
      "returnType": "saveResult", 
      "estimatedDuration": "0.5-2 seconds"
    }
  }
}
@endjson
