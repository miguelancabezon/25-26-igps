@startuml parte2
title Diagrama de Objetos - Situación al 15 Nov 2025, 14:30h

' Estilos visuales
skinparam object {
    BackgroundColor White
    ArrowColor Black
    BorderColor Black
}

' --- USUARIOS ---
object "estudiante1: Estudiante" as est1 {
    id = "EST-2023001"
    nombre = "Ana García"
    email = "ana.garcia@uni.es"
    prestamosActivos = 2
    multasAcumuladas = 1.50
}

object "profesor1: Profesor" as prof1 {
    id = "PROF-2020045"
    nombre = "Dr. Carlos Ruiz"
    departamento = "Informática"
    prestamosActivos = 3
    multasAcumuladas = 0.00
}

object "estudiante2: Estudiante" as est2 {
    id = "EST-2024089"
    nombre = "Luis Martínez"
    email = "luis.martinez@uni.es"
    prestamosActivos = 1
    multasAcumuladas = 0.00
}

' --- LIBROS ---
object "libro1: Libro" as lib1 {
    isbn = "978-3-16-148410-0"
    titulo = "Clean Code"
    autor = "Robert C. Martin"
    ejemplares = 3
    disponibles = 1
    categoria = "Programación"
}

object "libro2: Libro" as lib2 {
    isbn = "978-0-13-468599-1"
    titulo = "The Pragmatic Programmer"
    autor = "Hunt & Thomas"
    ejemplares = 2
    disponibles = 0
    categoria = "Programación"
}

object "libro3: Libro" as lib3 {
    isbn = "978-0-596-52068-7"
    titulo = "JavaScript: The Good Parts"
    autor = "Douglas Crockford"
    ejemplares = 4
    disponibles = 3
    categoria = "Programación"
}

object "libro4: Libro" as lib4 {
    isbn = "978-0-134-68599-8"
    titulo = "Design Patterns"
    autor = "Gang of Four"
    ejemplares = 2
    disponibles = 1
    categoria = "Ingeniería Software"
}

object "libro5: Libro" as lib5 {
    isbn = "978-0-321-12742-6"
    titulo = "Domain-Driven Design"
    autor = "Eric Evans"
    ejemplares = 1
    disponibles = 0
    categoria = "Arquitectura"
}

' --- PRÉSTAMOS ---
object "prestamo1: Prestamo" as prest1 {
    id = "PREST-2025-1234"
    fechaInicio = "2025-11-01"
    fechaVencimiento = "2025-11-15"
    estado = "Activo"
    renovaciones = 0
    multa = 0.00
}

object "prestamo2: Prestamo" as prest2 {
    id = "PREST-2025-1256"
    fechaInicio = "2025-10-28"
    fechaVencimiento = "2025-11-27"
    estado = "Activo"
    renovaciones = 0
    multa = 0.00
}

object "prestamo3: Prestamo" as prest3 {
    id = "PREST-2025-1189"
    fechaInicio = "2025-10-20"
    fechaVencimiento = "2025-11-03"
    estado = "Vencido"
    renovaciones = 1
    multa = 6.00
}

object "prestamo4: Prestamo" as prest4 {
    id = "PREST-2025-1290"
    fechaInicio = "2025-11-10"
    fechaVencimiento = "2025-11-24"
    estado = "Activo"
    renovaciones = 0
    multa = 0.00
}

' --- RESERVAS ---
object "reserva1: Reserva" as res1 {
    id = "RES-2025-0089"
    fechaReserva = "2025-11-14"
    estado = "Pendiente"
    posicionCola = 1
}

object "reserva2: Reserva" as res2 {
    id = "RES-2025-0090"
    fechaReserva = "2025-11-15"
    estado = "Pendiente"
    posicionCola = 2
}

' --- MULTAS ---
object "multa1: Multa" as mul1 {
    id = "MULT-2025-045"
    monto = 6.00
    fechaGeneracion = "2025-11-04"
    estado = "Pendiente"
    concepto = "Retraso en devolución"
}

' --- RELACIONES ---

' Estudiante 1 y sus préstamos/multas
est1 -- prest1 : tiene >
est1 -- prest3 : tiene >
est1 -- mul1 : debe >

' Conexión de préstamos con libros (Est 1)
prest1 -- lib1 : ejemplar de >
prest3 -- lib5 : ejemplar de >

' Conexión multa con préstamo
mul1 -- prest3 : generada por >

' Profesor y sus préstamos
prof1 -- prest2 : tiene >
prest2 -- lib2 : ejemplar de >

' Estudiante 2 y sus préstamos
est2 -- prest4 : tiene >
prest4 -- lib3 : ejemplar de >

' Reservas
est2 -- res1 : solicitó >
res1 -- lib2 : sobre >
res2 -- lib2 : sobre >
' Nota: reserva2 hecha por "otro estudiante" (no instanciado explícitamente, queda suelta o conectada al libro)

@enduml