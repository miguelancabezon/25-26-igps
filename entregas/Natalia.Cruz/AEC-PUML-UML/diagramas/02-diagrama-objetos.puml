@startuml
title Sistema de Gestión de Biblioteca Universitaria - Diagrama de Objetos\nEscenario: 15 de Noviembre de 2025, 14:30h

' ===== ESTILOS PERSONALIZADOS =====
skinparam object {
    BackgroundColor LightBlue
    BorderColor DarkBlue
    ArrowColor DarkSlateGray
}

skinparam class {
    BackgroundColor<<Usuario>> LightGreen
    BackgroundColor<<Libro>> LightYellow
    BackgroundColor<<Prestamo>> LightCoral
    BackgroundColor<<Reserva>> Lavender
    BackgroundColor<<Multa>> Pink
}

' ===== OBJETOS: USUARIOS =====
object "estudiante1 : Estudiante" as est1 <<Usuario>> {
    id = "EST-2023001"
    nombre = "Ana García"
    email = "ana.garcia@uni.es"
    prestamosActivos = 2
    multasAcumuladas = 1.50
}

object "profesor1 : Profesor" as prof1 <<Usuario>> {
    id = "PROF-2020045"
    nombre = "Dr. Carlos Ruiz"
    departamento = "Informática"
    prestamosActivos = 3
    multasAcumuladas = 0.00
}

object "estudiante2 : Estudiante" as est2 <<Usuario>> {
    id = "EST-2024089"
    nombre = "Luis Martínez"
    email = "luis.martinez@uni.es"
    prestamosActivos = 1
    multasAcumuladas = 0.00
}

' ===== OBJETOS: LIBROS =====
object "libro1 : Libro" as lib1 <<Libro>> {
    isbn = "978-3-16-148410-0"
    titulo = "Clean Code"
    autor = "Robert C. Martin"
    ejemplares = 3
    disponibles = 1
    categoria = "Programación"
}

object "libro2 : Libro" as lib2 <<Libro>> {
    isbn = "978-0-13-468599-1"
    titulo = "The Pragmatic Programmer"
    autor = "Hunt & Thomas"
    ejemplares = 2
    disponibles = 0
    categoria = "Programación"
}

object "libro3 : Libro" as lib3 <<Libro>> {
    isbn = "978-0-596-52068-7"
    titulo = "JavaScript: The Good Parts"
    autor = "Douglas Crockford"
    ejemplares = 4
    disponibles = 3
    categoria = "Programación"
}

object "libro4 : Libro" as lib4 <<Libro>> {
    isbn = "978-0-134-68599-8"
    titulo = "Design Patterns"
    autor = "Gang of Four"
    ejemplares = 2
    disponibles = 1
    categoria = "Ingeniería Software"
}

object "libro5 : Libro" as lib5 <<Libro>> {
    isbn = "978-0-321-12742-6"
    titulo = "Domain-Driven Design"
    autor = "Eric Evans"
    ejemplares = 1
    disponibles = 0
    categoria = "Arquitectura"
}

' ===== OBJETOS: PRÉSTAMOS =====
object "prestamo1 : Prestamo" as prest1 <<Prestamo>> {
    id = "PREST-2025-1234"
    fechaInicio = "2025-11-01"
    fechaVencimiento = "2025-11-15"
    estado = "Activo"
    renovaciones = 0
    multa = 0.00
}

object "prestamo2 : Prestamo" as prest2 <<Prestamo>> {
    id = "PREST-2025-1256"
    fechaInicio = "2025-10-28"
    fechaVencimiento = "2025-11-27"
    estado = "Activo"
    renovaciones = 0
    multa = 0.00
}

object "prestamo3 : Prestamo" as prest3 <<Prestamo>> {
    id = "PREST-2025-1189"
    fechaInicio = "2025-10-20"
    fechaVencimiento = "2025-11-03"
    estado = "Vencido"
    renovaciones = 1
    multa = 6.00
}

object "prestamo4 : Prestamo" as prest4 <<Prestamo>> {
    id = "PREST-2025-1290"
    fechaInicio = "2025-11-10"
    fechaVencimiento = "2025-11-24"
    estado = "Activo"
    renovaciones = 0
    multa = 0.00
}

object "prestamo5 : Prestamo" as prest5 <<Prestamo>> {
    id = "PREST-2025-1301"
    fechaInicio = "2025-11-05"
    fechaVencimiento = "2025-12-05"
    estado = "Activo"
    renovaciones = 0
    multa = 0.00
}

' ===== OBJETOS: RESERVAS =====
object "reserva1 : Reserva" as res1 <<Reserva>> {
    id = "RES-2025-0089"
    fechaReserva = "2025-11-14"
    estado = "Pendiente"
    posicionCola = 1
}

object "reserva2 : Reserva" as res2 <<Reserva>> {
    id = "RES-2025-0090"
    fechaReserva = "2025-11-15"
    estado = "Pendiente"
    posicionCola = 2
}

' ===== OBJETOS: MULTA =====
object "multa1 : Multa" as mult1 <<Multa>> {
    id = "MULT-2025-045"
    monto = 6.00
    fechaGeneracion = "2025-11-04"
    estado = "Pendiente"
    concepto = "Retraso en devolución"
}

' ===== RELACIONES: USUARIOS -> PRÉSTAMOS (COMPOSICIÓN) =====
est1 *-- prest1 : tiene
est1 *-- prest3 : tiene
prof1 *-- prest2 : tiene
prof1 *-- prest5 : tiene
est2 *-- prest4 : tiene

' ===== RELACIONES: PRÉSTAMOS -> LIBROS (AGREGACIÓN) =====
prest1 o-- lib1 : de
prest2 o-- lib2 : de
prest3 o-- lib5 : de
prest4 o-- lib3 : de
prest5 o-- lib4 : de

' ===== RELACIONES: RESERVAS -> LIBROS (DEPENDENCIA) =====
res1 ..> lib2 : reserva
res2 ..> lib2 : reserva

' ===== RELACIONES: USUARIOS -> RESERVAS (ASOCIACIÓN) =====
est2 -- res1 : hizo
est1 -- res2 : hizo

' ===== RELACIONES: MULTA -> PRÉSTAMO (COMPOSICIÓN) =====
mult1 *-- prest3 : generada por

' ===== RELACIONES: MULTA -> USUARIO (ASOCIACIÓN) =====
est1 -- mult1 : tiene pendiente

' ===== NOTAS EXPLICATIVAS =====
note right of prest3
  Préstamo VENCIDO
  12 días de retraso
  Multa acumulada: €6.00
end note

note bottom of lib2
  Libro NO disponible
  2 reservas pendientes
end note

note left of mult1
  Multa sin pagar
  Bloquea nuevos préstamos
end note

@enduml